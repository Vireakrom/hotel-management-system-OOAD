using System;
using HotelManagementSystem.Testing;

namespace HotelManagementSystem
{
    /// <summary>
    /// Test runner for all test suites
    /// Uncomment Main method to run tests
    /// </summary>
    class TestRunner
    {
        // Uncomment to run tests:
        static void Main(string[] args)
        {
            RunDay30ValidationTests();
        }

        /// <summary>
        /// Runs Day 30 Validation Tests - Comprehensive Input Validation
        /// </summary>
        public static void RunDay30ValidationTests()
        {
            Console.WriteLine("============================================");
            Console.WriteLine("DAY 30: COMPREHENSIVE INPUT VALIDATION");
            Console.WriteLine("============================================\n");
            
            Day30ValidationTests.RunAllTests();
            Day30ValidationTests.TestValidationSummary();
            
            Console.WriteLine("\n============================================");
            Console.WriteLine("Press any key to exit...");
            WaitForExit();
        }

        /// <summary>
        /// Runs Day 29 Bug Fixing Tests - Comprehensive CRUD Testing
        /// </summary>
        public static void RunDay29BugFixingTests()
        {
            Console.WriteLine("========================================");
            Console.WriteLine("DAY 29: BUG FIXING - COMPREHENSIVE CRUD");
            Console.WriteLine("========================================\n");
            
            string results = Day29BugFixingTests.RunAllCRUDTests();
            
            Console.WriteLine(results);
            
            Console.WriteLine("\n========================================");
            Console.WriteLine("Press any key to exit...");
            WaitForExit();
        }

        /// <summary>
        /// Waits for user input before exiting, handles redirected console gracefully
        /// </summary>
        private static void WaitForExit()
        {
            try
            {
                // Check if console is available and interactive
                if (Environment.UserInteractive && !Console.IsInputRedirected)
                {
                    Console.ReadKey();
                }
                else
                {
                    // If console is redirected, just use Read() instead
                    Console.Read();
                }
            }
            catch (InvalidOperationException)
            {
                // If we still get an exception, just wait a moment and exit
                System.Threading.Thread.Sleep(2000);
            }
        }
    }
}
